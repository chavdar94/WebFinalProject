{% extends 'base/base.html' %}
{% load static %}

{% block content %}
    <div class="max-h-min min-w-min bg-blue-200 my-6 mx-6">
        <div class="mx-6 py-4 flex justify-between items-center">
            <div class="flex gap-2 items-center">
                <div class="mr-2">
                    {% if post.author.userprofile.profile_picture %}
                        <img src="{{ post.author.userprofile.profile_picture.url }}" alt="">
                    {% else %}
                        <i class="fa-solid fa-user"></i>
                    {% endif %}
                </div>
                <p>Author:
                    <a href="{% url 'profile-page' pk=post.author_id %}"><h2
                            class="text-xl font-semibold">{{ post.author }}</h2></p>
                </a>
            </div>
            <p>Created on: {{ post.created|date:'d M, Y' }}</p>

        </div>
        <hr>
        <div class="m-12">
            <h1 class="text-6xl text-white mb-12 underline">{{ post.title }}</h1>
            <p class="text-xl text-white mb-12">{{ post.body }}</p>

            <h3 class="border-b-2 border-black text-3xl pb-2">Comments:</h3>
            <ul>
                {% for comment in comments %}
                    <li class="text-lg text-white mt-4 border-b-2 border-black">
                        <p>Comment: {{ comment }}</p>
                        <p class="mb-2">Author: {{ comment.author }}</p>
                    </li>
                    {% empty %}
                    <h1 class="text-6xl text-white pb-12">No comments for {{ post }}</h1>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div>
        <form method="post">
            {% csrf_token %}
            {{ form }}
            <div>
                <button>Submit</button>
            </div>
        </form>
    </div>
    {% if request.user.pk == post.author.pk or request.user.is_superuser or is_admin or is_moderator %}
        <div class="flex gap-6">
            <div>
                <a href="{% url 'post_edit' slug=post.slug %}">Edit post</a>
            </div>
            <div>
                <a href="{% url 'post_delete' slug=post.slug %}">Delete post</a>
            </div>
        </div>
    {% endif %}

{% endblock %}